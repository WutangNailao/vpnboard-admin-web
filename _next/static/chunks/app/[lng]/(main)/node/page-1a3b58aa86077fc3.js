(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3146],{83492:function(e,n,r){Promise.resolve().then(r.bind(r,49465)),Promise.resolve().then(r.bind(r,51576)),Promise.resolve().then(r.bind(r,60753))},49465:function(e,n,r){"use strict";r.d(n,{default:function(){return N}});var s=r(52948),t=r(30786),l=r(24293),a=r(44645),i=r(26614),c=r(92887),o=r(44517),d=r(78324),u=r(72216),x=r(89986),h=r(83336),j=r(46959),m=r(19921),p=r(2720),f=r(44783),g=r(18849),v=r(52467);let b=j.z.object({name:j.z.string().min(2,{message:"name must be at least 2 characters."}),remarks:j.z.string()});function y(e){let{onSubmit:n,initialValues:r,loading:l,trigger:a,title:i}=e,[c,o]=(0,t.useState)(!1),d=(0,h.cI)({resolver:(0,u.F)(b),defaultValues:{...r}});async function j(e){await n(e)&&o(!1)}return(0,t.useEffect)(()=>{null==d||d.reset(r)},[d,r]),(0,s.jsxs)(v.yo,{open:c,onOpenChange:o,children:[(0,s.jsx)(v.aM,{asChild:!0,children:(0,s.jsx)(m.z,{size:"sm",onClick:()=>{d.reset(),o(!0)},children:a})}),(0,s.jsxs)(v.ue,{children:[(0,s.jsx)(v.Tu,{children:(0,s.jsx)(v.bC,{children:i})}),(0,s.jsx)(g.x,{className:"-mx-6 h-[calc(100vh-48px-36px-36px)]",children:(0,s.jsx)(p.l0,{...d,children:(0,s.jsxs)("form",{onSubmit:d.handleSubmit(j),className:"space-y-4 px-6 pt-4",children:[(0,s.jsx)(p.Wi,{control:d.control,name:"name",render:e=>{let{field:n}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"名称"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{...n})}),(0,s.jsx)(p.zG,{})]})}}),(0,s.jsx)(p.Wi,{control:d.control,name:"remarks",render:e=>{let{field:n}=e;return(0,s.jsxs)(p.xJ,{children:[(0,s.jsx)(p.lX,{children:"描述"}),(0,s.jsx)(p.NI,{children:(0,s.jsx)(f.I,{...n})}),(0,s.jsx)(p.zG,{})]})}})]})})}),(0,s.jsxs)(v.FF,{className:"pt-3",children:[(0,s.jsx)(m.z,{variant:"outline",disabled:l,onClick:()=>{o(!1)},children:"取消"}),(0,s.jsxs)(m.z,{disabled:l,onClick:d.handleSubmit(j),children:[l&&(0,s.jsx)(x.Icon,{icon:"mdi:loading",className:"mr-2 animate-spin"})," 确定"]})]})]})]})}function N(){let{data:e,refetch:n}=(0,a.a)({queryKey:["postAdminNodeGroupList"],queryFn:async()=>{let{data:e}=await (0,l.uR)({size:0});return e.data}}),[r,u]=(0,t.useState)(!1),x=[{accessorKey:"name",header:"名称"},{accessorKey:"remarks",header:"描述"},{accessorKey:"updated_at",header:"更新时间",cell:e=>{let{row:n}=e;return(0,i.p6)(n.getValue("updated_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,s.jsx)("div",{className:"text-right",children:"操作"}),cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(y,{trigger:"编辑",title:"修改节点组",loading:r,initialValues:t.original,onSubmit:async e=>{u(!0);try{return await (0,l.Dl)({...t.original,id:t.original.id,...e}),c.A.success("创建成功"),n(),u(!1),!0}catch(e){return u(!1),!1}}}),(0,s.jsx)(d.Z,{trigger:"删除",title:"你确定要删除吗?",description:"删除后数据将无法恢复，请谨慎操作",onConfirm:async()=>{await (0,l.OF)({id:t.original.id}),c.A.success("删除成功"),n()},onCancelText:"取消",onConfirmText:"确认"})]})}}];return(0,s.jsx)(o.w,{header:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(y,{trigger:"新建",title:"创建节点组",loading:r,onSubmit:async e=>{u(!0);try{return await (0,l.cx)(e),c.A.success("创建成功"),n(),u(!1),!0}catch(e){return u(!1),!1}}})}),columns:x,data:(null==e?void 0:e.list)||[],pagination:{page:1,size:null==e?void 0:e.total,total:null==e?void 0:e.total},operations:{remove:async e=>{e.forEach(async e=>{await (0,l.OF)({id:e.id})}),c.A.success("删除成功"),n()}}})}},51576:function(e,n,r){"use strict";r.d(n,{default:function(){return G}});var s=r(52948),t=r(30786),l=r(24293),a=r(44645),i=r(26614),c=r(92887),o=r(31050),d=r(56815),u=r(44517),x=r(78324),h=r(72216),j=r(89986),m=r(83336),p=r(46959),f=r(63854),g=r(19921),v=r(2720),b=r(44783),y=r(18849),N=r(52467);let w=p.z.object({transfer_address:p.z.string().optional(),transfer_port:p.z.number().optional()}),z=p.z.object({method:p.z.string(),server_key:p.z.string()}),k=p.z.object({network:p.z.string(),enable_tls:p.z.boolean(),service_name:p.z.string().optional(),path:p.z.string().optional()}),_=p.z.object({network:p.z.string(),enable_tls:p.z.boolean(),service_name:p.z.string().optional(),path:p.z.string().optional()}),C=p.z.object({network:p.z.string(),service_name:p.z.string().optional(),path:p.z.string().optional()}),I=p.z.union([z,k,_,C]),V=p.z.object({name:p.z.string().min(2,{message:"name must be at least 2 characters."}),remarks:p.z.string().optional(),address:p.z.string(),port:p.z.number(),node_speed_limit:p.z.number().optional(),traffic_rate:p.z.number().optional(),protocol:p.z.enum(["shadowsocks","vmess","vless","trojan","transfer"]),node_group_id:p.z.number().optional().nullish(),extra_config:I.optional().and(w)});function S(e){let{onSubmit:n,initialValues:r,loading:i,trigger:c,title:u}=e,[x,p]=(0,t.useState)(!1),w=(0,m.cI)({resolver:(0,h.F)(V),defaultValues:{...r}}),z=w.watch("protocol");async function k(e){await n(e)&&p(!1)}(0,t.useEffect)(()=>{(null==r?void 0:r.protocol)!==z&&(null==w||w.setValue("extra_config",{}))},[w,z,null==r?void 0:r.protocol]),(0,t.useEffect)(()=>{null==w||w.reset(r)},[w,r]);let{data:_}=(0,a.a)({queryKey:["postAdminNodeGroupList","all"],queryFn:async()=>{let{data:e}=await (0,l.uR)({size:0});return e.data.list}});return(0,s.jsxs)(N.yo,{open:x,onOpenChange:p,children:[(0,s.jsx)(N.aM,{asChild:!0,children:(0,s.jsx)(g.z,{size:"sm",onClick:()=>{w.reset(),p(!0)},children:c})}),(0,s.jsxs)(N.ue,{children:[(0,s.jsx)(N.Tu,{children:(0,s.jsx)(N.bC,{children:u})}),(0,s.jsx)(y.x,{className:"-mx-6 h-[calc(100vh-48px-36px-36px)]",children:(0,s.jsx)(v.l0,{...w,children:(0,s.jsxs)("form",{className:"grid grid-cols-2 gap-2 px-6 pt-4",children:[(0,s.jsx)(v.Wi,{control:w.control,name:"name",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"名称"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"remarks",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"备注"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"node_speed_limit",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"节点限速"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"traffic_rate",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"流量比例"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"address",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"服务器地址"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"port",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"服务器端口"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"protocol",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"协议"}),(0,s.jsx)(v.NI,{children:(0,s.jsxs)(o.Ph,{onValueChange:n.onChange,defaultValue:n.value,children:[(0,s.jsx)(v.NI,{children:(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"请选择协议"})})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"shadowsocks",children:"Shadowsocks"}),(0,s.jsx)(o.Ql,{value:"vmess",children:"Vmess"}),(0,s.jsx)(o.Ql,{value:"vless",children:"Vless"}),(0,s.jsx)(o.Ql,{value:"trojan",children:"Trojan"})]})]})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"node_group_id",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"节点组ID"}),(0,s.jsx)(v.NI,{children:(0,s.jsxs)(o.Ph,{onValueChange:e=>{"empty"===e?n.onChange(void 0):n.onChange(Number(e))},defaultValue:String(n.value),children:[(0,s.jsx)(v.NI,{children:(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"请选择协议"})})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"empty",children:"不分组"}),null==_?void 0:_.map(e=>(0,s.jsx)(o.Ql,{value:String(e.id),children:e.name},e.id))]})]})}),(0,s.jsx)(v.zG,{})]})}}),z&&(0,s.jsxs)(f.UQ,{type:"multiple",defaultValue:["protocol"],className:"col-span-2 w-full",children:[(0,s.jsxs)(f.Qd,{value:"protocol",children:[(0,s.jsx)(f.o4,{className:"uppercase",children:z}),(0,s.jsxs)(f.vF,{className:"grid grid-cols-2 gap-2",children:["shadowsocks"===z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.method",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"加密方式"}),(0,s.jsx)(v.NI,{children:(0,s.jsxs)(o.Ph,{onValueChange:n.onChange,defaultValue:n.value,children:[(0,s.jsx)(v.NI,{children:(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"请选择加密方式"})})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"2022-blake3-aes-256-gcm",children:"2022-blake3-aes-256-gcm"}),(0,s.jsx)(o.Ql,{value:"2022-blake3-chacha20-poly1305",children:"2022-blake3-chacha20-poly1305"}),(0,s.jsx)(o.Ql,{value:"aes-256-gcm",children:"aes-256-gcm"}),(0,s.jsx)(o.Ql,{value:"aes-128-gcm",children:"aes-128-gcm"}),(0,s.jsx)(o.Ql,{value:"chacha20-ietf-poly1305",children:"chacha20-ietf-poly1305"})]})]})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.server_key",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"密码"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}})]}),"vmess"===z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.network",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"网络类型"}),(0,s.jsx)(v.NI,{children:(0,s.jsxs)(o.Ph,{onValueChange:n.onChange,defaultValue:n.value||"tcp",children:[(0,s.jsx)(v.NI,{children:(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"网络类型"})})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"tcp",children:"TCP"}),(0,s.jsx)(o.Ql,{value:"websocket",children:"WebSocket"}),(0,s.jsx)(o.Ql,{value:"grpc",children:"gRPC"})]})]})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.enable_tls",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"是否启用 TLS"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(d.Switch,{checked:!!n.value,onCheckedChange:n.onChange})})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.service_name",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"服务名"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.path",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"路径"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}})]}),"vless"===z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.network",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"网络类型"}),(0,s.jsx)(v.NI,{children:(0,s.jsxs)(o.Ph,{onValueChange:n.onChange,defaultValue:n.value||"tcp",children:[(0,s.jsx)(v.NI,{children:(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"网络类型"})})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"tcp",children:"TCP"}),(0,s.jsx)(o.Ql,{value:"websocket",children:"WebSocket"}),(0,s.jsx)(o.Ql,{value:"grpc",children:"gRPC"}),(0,s.jsx)(o.Ql,{value:"http2",children:"HTTP/2"})]})]})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.enable_tls",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"是否启用 TLS"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(d.Switch,{checked:!!n.value,onCheckedChange:n.onChange})})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.service_name",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"服务名"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.path",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"路径"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}})]}),"trojan"===z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.network",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"网络类型"}),(0,s.jsx)(v.NI,{children:(0,s.jsxs)(o.Ph,{onValueChange:n.onChange,defaultValue:n.value||"tcp",children:[(0,s.jsx)(v.NI,{children:(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"网络类型"})})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"tcp",children:"TCP"}),(0,s.jsx)(o.Ql,{value:"websocket",children:"WebSocket"}),(0,s.jsx)(o.Ql,{value:"grpc",children:"gRPC"})]})]})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.service_name",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"服务名"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.path",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"路径"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}})]})]})]}),(0,s.jsxs)(f.Qd,{value:"transfer",children:[(0,s.jsx)(f.o4,{children:"中转配置"}),(0,s.jsxs)(f.vF,{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.transfer_address",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"中转地址"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:w.control,name:"extra_config.transfer_port",render:e=>{let{field:n}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"中转端口"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(b.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(v.zG,{})]})}})]})]})]})]})})}),(0,s.jsxs)(N.FF,{className:"pt-3",children:[(0,s.jsx)(g.z,{variant:"outline",disabled:i,onClick:()=>{p(!1)},children:"取消"}),(0,s.jsxs)(g.z,{disabled:i,onClick:w.handleSubmit(k),children:[i&&(0,s.jsx)(j.Icon,{icon:"mdi:loading",className:"mr-2 animate-spin"})," 确定"]})]})]})]})}function G(){let[e,n]=(0,t.useState)(!1),[r,h]=(0,t.useState)({page:1,size:50}),{data:j,refetch:m}=(0,a.a)({queryKey:["postAdminNodeList",r],queryFn:async()=>{let{data:e}=await (0,l.HZ)(r);return e.data}}),{data:p}=(0,a.a)({queryKey:["postAdminNodeGroupList","all"],queryFn:async()=>{let{data:e}=await (0,l.uR)({size:0});return e.data.list}}),f=[{accessorKey:"name",header:"名称"},{accessorKey:"protocol",header:"类型"},{accessorKey:"address",header:"地址",cell:e=>{let{row:n}=e;return"".concat(n.original.address,":").concat(n.original.port)}},{accessorKey:"node_speed_limit",header:"限速"},{accessorKey:"traffic_rate",header:"倍率"},{accessorKey:"enabled",header:"状态",cell:e=>{let{row:n}=e;return(0,s.jsx)(d.Switch,{checked:n.getValue("enabled"),onCheckedChange:async e=>{await (0,l.Eo)({...n.original,id:n.original.id,enabled:e}),m()}})}},{accessorKey:"node_group_id",header:"节点组",cell:e=>{var n;let{row:r}=e;return null==p?void 0:null===(n=p.find(e=>e.id===r.getValue("node_group_id")))||void 0===n?void 0:n.name}},{accessorKey:"updated_at",header:"更新时间",cell:e=>{let{row:n}=e;return(0,i.p6)(n.getValue("updated_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,s.jsx)("div",{className:"text-right",children:"操作"}),cell:r=>{let{row:t}=r;return(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(S,{trigger:"编辑",title:"编辑节点",loading:e,initialValues:t.original,onSubmit:async e=>{n(!0);try{return await (0,l.Eo)({...t.original,id:t.original.id,...e}),c.A.success("创建成功"),m(),n(!1),!0}catch(e){return n(!1),!1}}}),(0,s.jsx)(x.Z,{trigger:"删除",title:"你确定要删除吗?",description:"删除后数据将无法恢复，请谨慎操作",onConfirm:async()=>{await (0,l.dm)({id:t.original.id}),c.A.success("删除成功"),m()},onCancelText:"取消",onConfirmText:"确认"})]})}}];return(0,s.jsx)(u.w,{header:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)(o.Ph,{onValueChange:e=>{h({...r,node_group_id:"all"===e?void 0:Number(e)})},children:[(0,s.jsx)(o.i4,{className:"w-[180px]",children:(0,s.jsx)(o.ki,{placeholder:"节点组"})}),(0,s.jsx)(o.Bw,{children:(0,s.jsxs)(o.DI,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"全部"}),null==p?void 0:p.map(e=>(0,s.jsx)(o.Ql,{value:String(e.id),children:e.name},e.id))]})})]}),(0,s.jsx)(S,{trigger:"新建",title:"新建节点",loading:e,onSubmit:async e=>{n(!0);try{return await (0,l.d_)({...e,enabled:!0}),c.A.success("创建成功"),m(),n(!1),!0}catch(e){return n(!1),!1}}})]}),columns:f,data:(null==j?void 0:j.list)||[],pagination:{page:r.page,size:r.size,total:null==j?void 0:j.total,onChange:(e,n)=>{h({...r,page:e,size:n})}},operations:{remove:async e=>{e.forEach(async e=>{await (0,l.dm)({id:e.id})}),c.A.success("删除成功"),m()}}})}},31050:function(e,n,r){"use strict";r.d(n,{Bw:function(){return j},DI:function(){return o},Ph:function(){return c},Ql:function(){return m},i4:function(){return u},ki:function(){return d}});var s=r(52948),t=r(30786),l=r(28523),a=r(21418),i=r(33412);let c=a.fC,o=a.ZA,d=a.B4,u=t.forwardRef((e,n)=>{let{className:r,children:t,...c}=e;return(0,s.jsxs)(a.xz,{ref:n,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...c,children:[t,(0,s.jsx)(a.JO,{asChild:!0,children:(0,s.jsx)(l.jnn,{className:"size-4 opacity-50"})})]})});u.displayName=a.xz.displayName;let x=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(a.u_,{ref:n,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,s.jsx)(l.g8U,{})})});x.displayName=a.u_.displayName;let h=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(a.$G,{ref:n,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,s.jsx)(l.v4q,{})})});h.displayName=a.$G.displayName;let j=t.forwardRef((e,n)=>{let{className:r,children:t,position:l="popper",...c}=e;return(0,s.jsx)(a.h_,{children:(0,s.jsxs)(a.VY,{ref:n,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...c,children:[(0,s.jsx)(x,{}),(0,s.jsx)(a.l_,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(h,{})]})})});j.displayName=a.VY.displayName,t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(a.__,{ref:n,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r),...t})}).displayName=a.__.displayName;let m=t.forwardRef((e,n)=>{let{className:r,children:t,...c}=e;return(0,s.jsxs)(a.ck,{ref:n,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...c,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(a.wU,{children:(0,s.jsx)(l.nQG,{className:"size-4"})})}),(0,s.jsx)(a.eT,{children:t})]})});m.displayName=a.ck.displayName,t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(a.Z0,{ref:n,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",r),...t})}).displayName=a.Z0.displayName},56815:function(e,n,r){"use strict";r.r(n),r.d(n,{Switch:function(){return i}});var s=r(52948),t=r(30786),l=r(84051),a=r(33412);let i=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.fC,{className:(0,a.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...t,ref:n,children:(0,s.jsx)(l.bU,{className:(0,a.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.fC.displayName},60753:function(e,n,r){"use strict";r.r(n),r.d(n,{Tabs:function(){return i},TabsContent:function(){return d},TabsList:function(){return c},TabsTrigger:function(){return o}});var s=r(52948),t=r(30786),l=r(3536),a=r(33412);let i=l.fC,c=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.aV,{ref:n,className:(0,a.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...t})});c.displayName=l.aV.displayName;let o=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.xz,{ref:n,className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...t})});o.displayName=l.xz.displayName;let d=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.VY,{ref:n,className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});d.displayName=l.VY.displayName},84051:function(e,n,r){"use strict";r.d(n,{bU:function(){return N},fC:function(){return y}});var s=r(98323),t=r(30786),l=r(88532),a=r(45477),i=r(69726),c=r(29367),o=r(20386),d=r(73123),u=r(99034);let x="Switch",[h,j]=(0,i.b)(x),[m,p]=h(x),f=(0,t.forwardRef)((e,n)=>{let{__scopeSwitch:r,name:i,checked:o,defaultChecked:d,required:x,disabled:h,value:j="on",onCheckedChange:p,...f}=e,[g,y]=(0,t.useState)(null),N=(0,a.e)(n,e=>y(e)),w=(0,t.useRef)(!1),z=!g||!!g.closest("form"),[k=!1,_]=(0,c.T)({prop:o,defaultProp:d,onChange:p});return(0,t.createElement)(m,{scope:r,checked:k,disabled:h},(0,t.createElement)(u.WV.button,(0,s.Z)({type:"button",role:"switch","aria-checked":k,"aria-required":x,"data-state":b(k),"data-disabled":h?"":void 0,disabled:h,value:j},f,{ref:N,onClick:(0,l.M)(e.onClick,e=>{_(e=>!e),z&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})),z&&(0,t.createElement)(v,{control:g,bubbles:!w.current,name:i,value:j,checked:k,required:x,disabled:h,style:{transform:"translateX(-100%)"}}))}),g=(0,t.forwardRef)((e,n)=>{let{__scopeSwitch:r,...l}=e,a=p("SwitchThumb",r);return(0,t.createElement)(u.WV.span,(0,s.Z)({"data-state":b(a.checked),"data-disabled":a.disabled?"":void 0},l,{ref:n}))}),v=e=>{let{control:n,checked:r,bubbles:l=!0,...a}=e,i=(0,t.useRef)(null),c=(0,o.D)(r),u=(0,d.t)(n);return(0,t.useEffect)(()=>{let e=i.current,n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&n){let s=new Event("click",{bubbles:l});n.call(e,r),e.dispatchEvent(s)}},[c,r,l]),(0,t.createElement)("input",(0,s.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:r},a,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function b(e){return e?"checked":"unchecked"}let y=f,N=g}},function(e){e.O(0,[792,1896,736,9986,4699,466,7647,2494,5362,6856,6035,4645,1418,3536,1826,839,7692,2100,1162,1744],function(){return e(e.s=83492)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3146],{83492:function(e,r,t){Promise.resolve().then(t.bind(t,49465)),Promise.resolve().then(t.bind(t,51576)),Promise.resolve().then(t.bind(t,60753))},49465:function(e,r,t){"use strict";t.d(r,{default:function(){return N}});var n=t(52948),s=t(30786),a=t(24293),l=t(44645),i=t(26614),o=t(92887),c=t(44517),d=t(78324),u=t(72216),x=t(89986),h=t(83336),m=t(46959),f=t(19921),j=t(2720),p=t(44783),g=t(18849),v=t(52467);let b=m.z.object({name:m.z.string().min(2,{message:"name must be at least 2 characters."}),remarks:m.z.string()});function y(e){let{onSubmit:r,initialValues:t,loading:a,trigger:l,title:i}=e,[o,c]=(0,s.useState)(!1),d=(0,h.cI)({resolver:(0,u.F)(b),defaultValues:{...t}});async function m(e){await r(e)&&c(!1)}return(0,s.useEffect)(()=>{null==d||d.reset(t)},[d,t]),(0,n.jsxs)(v.yo,{open:o,onOpenChange:c,children:[(0,n.jsx)(v.aM,{asChild:!0,children:(0,n.jsx)(f.z,{size:"sm",onClick:()=>{d.reset(),c(!0)},children:l})}),(0,n.jsxs)(v.ue,{children:[(0,n.jsx)(v.Tu,{children:(0,n.jsx)(v.bC,{children:i})}),(0,n.jsx)(g.x,{className:"-mx-6 h-[calc(100vh-48px-36px-36px)]",children:(0,n.jsx)(j.l0,{...d,children:(0,n.jsxs)("form",{onSubmit:d.handleSubmit(m),className:"space-y-4 px-6 pt-4",children:[(0,n.jsx)(j.Wi,{control:d.control,name:"name",render:e=>{let{field:r}=e;return(0,n.jsxs)(j.xJ,{children:[(0,n.jsx)(j.lX,{children:"名称"}),(0,n.jsx)(j.NI,{children:(0,n.jsx)(p.I,{...r})}),(0,n.jsx)(j.zG,{})]})}}),(0,n.jsx)(j.Wi,{control:d.control,name:"remarks",render:e=>{let{field:r}=e;return(0,n.jsxs)(j.xJ,{children:[(0,n.jsx)(j.lX,{children:"描述"}),(0,n.jsx)(j.NI,{children:(0,n.jsx)(p.I,{...r})}),(0,n.jsx)(j.zG,{})]})}})]})})}),(0,n.jsxs)(v.FF,{className:"flex-row justify-end gap-2 pt-3",children:[(0,n.jsx)(f.z,{variant:"outline",disabled:a,onClick:()=>{c(!1)},children:"取消"}),(0,n.jsxs)(f.z,{disabled:a,onClick:d.handleSubmit(m),children:[a&&(0,n.jsx)(x.Icon,{icon:"mdi:loading",className:"mr-2 animate-spin"})," 确定"]})]})]})]})}function N(){let{data:e,refetch:r}=(0,l.a)({queryKey:["postAdminNodeGroupList"],queryFn:async()=>{let{data:e}=await (0,a.uR)({size:0});return e.data}}),[t,u]=(0,s.useState)(!1),x=[{accessorKey:"name",header:"名称"},{accessorKey:"remarks",header:"描述"},{accessorKey:"updated_at",header:"更新时间",cell:e=>{let{row:r}=e;return(0,i.p6)(r.getValue("updated_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,n.jsx)("div",{className:"text-right",children:"操作"}),cell:e=>{let{row:s}=e;return(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(y,{trigger:"编辑",title:"修改节点组",loading:t,initialValues:s.original,onSubmit:async e=>{u(!0);try{return await (0,a.Dl)({...s.original,id:s.original.id,...e}),o.A.success("创建成功"),r(),u(!1),!0}catch(e){return u(!1),!1}}}),(0,n.jsx)(d.Z,{trigger:"删除",title:"你确定要删除吗?",description:"删除后数据将无法恢复，请谨慎操作",onConfirm:async()=>{await (0,a.OF)({id:s.original.id}),o.A.success("删除成功"),r()},onCancelText:"取消",onConfirmText:"确认"})]})}}];return(0,n.jsx)(c.w,{header:(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(y,{trigger:"新建",title:"创建节点组",loading:t,onSubmit:async e=>{u(!0);try{return await (0,a.cx)(e),o.A.success("创建成功"),r(),u(!1),!0}catch(e){return u(!1),!1}}})}),columns:x,data:(null==e?void 0:e.list)||[],pagination:{page:1,size:null==e?void 0:e.total,total:null==e?void 0:e.total},operations:{remove:async e=>{e.forEach(async e=>{await (0,a.OF)({id:e.id})}),o.A.success("删除成功"),r()}}})}},51576:function(e,r,t){"use strict";t.d(r,{default:function(){return G}});var n=t(52948),s=t(30786),a=t(24293),l=t(44645),i=t(26614),o=t(92887),c=t(31050),d=t(56815),u=t(44517),x=t(78324),h=t(72216),m=t(89986),f=t(83336),j=t(46959),p=t(63854),g=t(19921),v=t(2720),b=t(44783),y=t(18849),N=t(52467);let w=j.z.object({transfer_address:j.z.string().optional(),transfer_port:j.z.number().optional()}),z=j.z.object({method:j.z.string(),server_key:j.z.string()}),k=j.z.object({network:j.z.string(),enable_tls:j.z.boolean(),service_name:j.z.string().optional(),path:j.z.string().optional()}),C=j.z.object({network:j.z.string(),enable_tls:j.z.boolean(),service_name:j.z.string().optional(),path:j.z.string().optional()}),_=j.z.object({network:j.z.string(),service_name:j.z.string().optional(),path:j.z.string().optional()}),I=j.z.union([z,k,C,_]),V=j.z.object({name:j.z.string().min(2,{message:"name must be at least 2 characters."}),remarks:j.z.string().optional(),address:j.z.string(),port:j.z.number(),node_speed_limit:j.z.number().optional(),traffic_rate:j.z.number().optional(),protocol:j.z.enum(["shadowsocks","vmess","vless","trojan","transfer"]),node_group_id:j.z.number().optional().nullish(),extra_config:I.optional().and(w)});function R(e){let{onSubmit:r,initialValues:t,loading:i,trigger:o,title:u}=e,[x,j]=(0,s.useState)(!1),w=(0,f.cI)({resolver:(0,h.F)(V),defaultValues:{...t}}),z=w.watch("protocol");async function k(e){await r(e)&&j(!1)}(0,s.useEffect)(()=>{(null==t?void 0:t.protocol)!==z&&(null==w||w.setValue("extra_config",{}))},[w,z,null==t?void 0:t.protocol]),(0,s.useEffect)(()=>{null==w||w.reset(t)},[w,t]);let{data:C}=(0,l.a)({queryKey:["postAdminNodeGroupList","all"],queryFn:async()=>{let{data:e}=await (0,a.uR)({size:0});return e.data.list}});return(0,n.jsxs)(N.yo,{open:x,onOpenChange:j,children:[(0,n.jsx)(N.aM,{asChild:!0,children:(0,n.jsx)(g.z,{size:"sm",onClick:()=>{w.reset(),j(!0)},children:o})}),(0,n.jsxs)(N.ue,{children:[(0,n.jsx)(N.Tu,{children:(0,n.jsx)(N.bC,{children:u})}),(0,n.jsx)(y.x,{className:"-mx-6 h-[calc(100vh-48px-36px-36px)]",children:(0,n.jsx)(v.l0,{...w,children:(0,n.jsxs)("form",{className:"grid grid-cols-2 gap-2 px-6 pt-4",children:[(0,n.jsx)(v.Wi,{control:w.control,name:"name",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"名称"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"remarks",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"备注"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"node_speed_limit",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"节点限速"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r,type:"number",value:r.value?Number(r.value):void 0,onChange:e=>{r.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"traffic_rate",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"流量比例"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r,type:"number",value:r.value?Number(r.value):void 0,onChange:e=>{r.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"address",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"服务器地址"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"port",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"服务器端口"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r,type:"number",value:r.value?Number(r.value):void 0,onChange:e=>{r.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"protocol",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"协议"}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(c.Ph,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"请选择协议"})})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"shadowsocks",children:"Shadowsocks"}),(0,n.jsx)(c.Ql,{value:"vmess",children:"Vmess"}),(0,n.jsx)(c.Ql,{value:"vless",children:"Vless"}),(0,n.jsx)(c.Ql,{value:"trojan",children:"Trojan"})]})]})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"node_group_id",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"节点组ID"}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(c.Ph,{onValueChange:e=>{"empty"===e?r.onChange(void 0):r.onChange(Number(e))},defaultValue:String(r.value),children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"请选择协议"})})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"empty",children:"不分组"}),null==C?void 0:C.map(e=>(0,n.jsx)(c.Ql,{value:String(e.id),children:e.name},e.id))]})]})}),(0,n.jsx)(v.zG,{})]})}}),z&&(0,n.jsxs)(p.UQ,{type:"multiple",defaultValue:["protocol"],className:"col-span-2 w-full",children:[(0,n.jsxs)(p.Qd,{value:"protocol",children:[(0,n.jsx)(p.o4,{className:"uppercase",children:z}),(0,n.jsxs)(p.vF,{className:"grid grid-cols-2 gap-2",children:["shadowsocks"===z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.method",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"加密方式"}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(c.Ph,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"请选择加密方式"})})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"2022-blake3-aes-256-gcm",children:"2022-blake3-aes-256-gcm"}),(0,n.jsx)(c.Ql,{value:"2022-blake3-chacha20-poly1305",children:"2022-blake3-chacha20-poly1305"}),(0,n.jsx)(c.Ql,{value:"aes-256-gcm",children:"aes-256-gcm"}),(0,n.jsx)(c.Ql,{value:"aes-128-gcm",children:"aes-128-gcm"}),(0,n.jsx)(c.Ql,{value:"chacha20-ietf-poly1305",children:"chacha20-ietf-poly1305"})]})]})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.server_key",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"密码"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}})]}),"vmess"===z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.network",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"网络类型"}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(c.Ph,{onValueChange:r.onChange,defaultValue:r.value||"tcp",children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"网络类型"})})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"tcp",children:"TCP"}),(0,n.jsx)(c.Ql,{value:"websocket",children:"WebSocket"}),(0,n.jsx)(c.Ql,{value:"grpc",children:"gRPC"})]})]})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.enable_tls",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"是否启用 TLS"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(d.r,{checked:!!r.value,onCheckedChange:r.onChange})})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.service_name",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"服务名"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.path",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"路径"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}})]}),"vless"===z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.network",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"网络类型"}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(c.Ph,{onValueChange:r.onChange,defaultValue:r.value||"tcp",children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"网络类型"})})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"tcp",children:"TCP"}),(0,n.jsx)(c.Ql,{value:"websocket",children:"WebSocket"}),(0,n.jsx)(c.Ql,{value:"grpc",children:"gRPC"}),(0,n.jsx)(c.Ql,{value:"http2",children:"HTTP/2"})]})]})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.enable_tls",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"是否启用 TLS"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(d.r,{checked:!!r.value,onCheckedChange:r.onChange})})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.service_name",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"服务名"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.path",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"路径"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}})]}),"trojan"===z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.network",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"网络类型"}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(c.Ph,{onValueChange:r.onChange,defaultValue:r.value||"tcp",children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"网络类型"})})}),(0,n.jsxs)(c.Bw,{children:[(0,n.jsx)(c.Ql,{value:"tcp",children:"TCP"}),(0,n.jsx)(c.Ql,{value:"websocket",children:"WebSocket"}),(0,n.jsx)(c.Ql,{value:"grpc",children:"gRPC"})]})]})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.service_name",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"服务名"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.path",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"路径"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}})]})]})]}),(0,n.jsxs)(p.Qd,{value:"transfer",children:[(0,n.jsx)(p.o4,{children:"中转配置"}),(0,n.jsxs)(p.vF,{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.transfer_address",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"中转地址"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:w.control,name:"extra_config.transfer_port",render:e=>{let{field:r}=e;return(0,n.jsxs)(v.xJ,{children:[(0,n.jsx)(v.lX,{children:"中转端口"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(b.I,{...r,type:"number",value:r.value?Number(r.value):void 0,onChange:e=>{r.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,n.jsx)(v.zG,{})]})}})]})]})]})]})})}),(0,n.jsxs)(N.FF,{className:"flex-row justify-end gap-2 pt-3",children:[(0,n.jsx)(g.z,{variant:"outline",disabled:i,onClick:()=>{j(!1)},children:"取消"}),(0,n.jsxs)(g.z,{disabled:i,onClick:w.handleSubmit(k),children:[i&&(0,n.jsx)(m.Icon,{icon:"mdi:loading",className:"mr-2 animate-spin"})," 确定"]})]})]})]})}function G(){let[e,r]=(0,s.useState)(!1),[t,h]=(0,s.useState)({page:1,size:50}),{data:m,refetch:f}=(0,l.a)({queryKey:["postAdminNodeList",t],queryFn:async()=>{let{data:e}=await (0,a.HZ)(t);return e.data}}),{data:j}=(0,l.a)({queryKey:["postAdminNodeGroupList","all"],queryFn:async()=>{let{data:e}=await (0,a.uR)({size:0});return e.data.list}}),p=[{accessorKey:"name",header:"名称"},{accessorKey:"protocol",header:"类型"},{accessorKey:"address",header:"地址",cell:e=>{let{row:r}=e;return"".concat(r.original.address,":").concat(r.original.port)}},{accessorKey:"node_speed_limit",header:"限速"},{accessorKey:"traffic_rate",header:"倍率"},{accessorKey:"enabled",header:"状态",cell:e=>{let{row:r}=e;return(0,n.jsx)(d.r,{checked:r.getValue("enabled"),onCheckedChange:async e=>{await (0,a.Eo)({...r.original,id:r.original.id,enabled:e}),f()}})}},{accessorKey:"node_group_id",header:"节点组",cell:e=>{var r;let{row:t}=e;return null==j?void 0:null===(r=j.find(e=>e.id===t.getValue("node_group_id")))||void 0===r?void 0:r.name}},{accessorKey:"updated_at",header:"更新时间",cell:e=>{let{row:r}=e;return(0,i.p6)(r.getValue("updated_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,n.jsx)("div",{className:"text-right",children:"操作"}),cell:t=>{let{row:s}=t;return(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(R,{trigger:"编辑",title:"编辑节点",loading:e,initialValues:s.original,onSubmit:async e=>{r(!0);try{return await (0,a.Eo)({...s.original,id:s.original.id,...e}),o.A.success("创建成功"),f(),r(!1),!0}catch(e){return r(!1),!1}}}),(0,n.jsx)(x.Z,{trigger:"删除",title:"你确定要删除吗?",description:"删除后数据将无法恢复，请谨慎操作",onConfirm:async()=>{await (0,a.dm)({id:s.original.id}),o.A.success("删除成功"),f()},onCancelText:"取消",onConfirmText:"确认"})]})}}];return(0,n.jsx)(u.w,{header:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(c.Ph,{onValueChange:e=>{h({...t,node_group_id:"all"===e?void 0:Number(e)})},children:[(0,n.jsx)(c.i4,{className:"w-[180px]",children:(0,n.jsx)(c.ki,{placeholder:"节点组"})}),(0,n.jsx)(c.Bw,{children:(0,n.jsxs)(c.DI,{children:[(0,n.jsx)(c.Ql,{value:"all",children:"全部"}),null==j?void 0:j.map(e=>(0,n.jsx)(c.Ql,{value:String(e.id),children:e.name},e.id))]})})]}),(0,n.jsx)(R,{trigger:"新建",title:"新建节点",loading:e,onSubmit:async e=>{r(!0);try{return await (0,a.d_)({...e,enabled:!0}),o.A.success("创建成功"),f(),r(!1),!0}catch(e){return r(!1),!1}}})]}),columns:p,data:(null==m?void 0:m.list)||[],pagination:{page:t.page,size:t.size,total:null==m?void 0:m.total,onChange:(e,r)=>{h({...t,page:e,size:r})}},operations:{remove:async e=>{e.forEach(async e=>{await (0,a.dm)({id:e.id})}),o.A.success("删除成功"),f()}}})}},63854:function(e,r,t){"use strict";t.d(r,{Qd:function(){return c},UQ:function(){return o},o4:function(){return d},vF:function(){return u}});var n=t(52948),s=t(30786),a=t(11826),l=t(28523),i=t(33412);let o=a.fC,c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.ck,{ref:r,className:(0,i.cn)("border-b",t),...s})});c.displayName="AccordionItem";let d=s.forwardRef((e,r)=>{let{className:t,children:s,...o}=e;return(0,n.jsx)(a.h4,{className:"flex",children:(0,n.jsxs)(a.xz,{ref:r,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...o,children:[s,(0,n.jsx)(l.v4q,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});d.displayName=a.xz.displayName;let u=s.forwardRef((e,r)=>{let{className:t,children:s,...l}=e;return(0,n.jsx)(a.VY,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,n.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",t),children:s})})});u.displayName=a.VY.displayName},2720:function(e,r,t){"use strict";t.d(r,{NI:function(){return j},Wi:function(){return u},l0:function(){return c},lX:function(){return f},xJ:function(){return m},zG:function(){return p}});var n=t(52948),s=t(30786),a=t(63911),l=t(83336),i=t(33412),o=t(81623);let c=l.RV,d=s.createContext({}),u=e=>{let{...r}=e;return(0,n.jsx)(d.Provider,{value:{name:r.name},children:(0,n.jsx)(l.Qr,{...r})})},x=()=>{let e=s.useContext(d),r=s.useContext(h),{getFieldState:t,formState:n}=(0,l.Gc)(),a=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},h=s.createContext({}),m=s.forwardRef((e,r)=>{let{className:t,...a}=e,l=s.useId();return(0,n.jsx)(h.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",t),...a})})});m.displayName="FormItem";let f=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:a,formItemId:l}=x();return(0,n.jsx)(o.Label,{ref:r,className:(0,i.cn)(a&&"text-destructive",t),htmlFor:l,...s})});f.displayName="FormLabel";let j=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,n.jsx)(a.g7,{ref:r,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...t})});j.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:a}=x();return(0,n.jsx)("p",{ref:r,id:a,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",t),...s})}).displayName="FormDescription";let p=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e,{error:l,formMessageId:o}=x(),c=l?String(null==l?void 0:l.message):s;return c?(0,n.jsx)("p",{ref:r,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",t),...a,children:c}):null});p.displayName="FormMessage"},31050:function(e,r,t){"use strict";t.d(r,{Bw:function(){return m},DI:function(){return c},Ph:function(){return o},Ql:function(){return f},i4:function(){return u},ki:function(){return d}});var n=t(52948),s=t(30786),a=t(28523),l=t(21418),i=t(33412);let o=l.fC,c=l.ZA,d=l.B4,u=s.forwardRef((e,r)=>{let{className:t,children:s,...o}=e;return(0,n.jsxs)(l.xz,{ref:r,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...o,children:[s,(0,n.jsx)(l.JO,{asChild:!0,children:(0,n.jsx)(a.jnn,{className:"size-4 opacity-50"})})]})});u.displayName=l.xz.displayName;let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(l.u_,{ref:r,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(a.g8U,{})})});x.displayName=l.u_.displayName;let h=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(l.$G,{ref:r,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(a.v4q,{})})});h.displayName=l.$G.displayName;let m=s.forwardRef((e,r)=>{let{className:t,children:s,position:a="popper",...o}=e;return(0,n.jsx)(l.h_,{children:(0,n.jsxs)(l.VY,{ref:r,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...o,children:[(0,n.jsx)(x,{}),(0,n.jsx)(l.l_,{className:(0,i.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(h,{})]})})});m.displayName=l.VY.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(l.__,{ref:r,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t),...s})}).displayName=l.__.displayName;let f=s.forwardRef((e,r)=>{let{className:t,children:s,...o}=e;return(0,n.jsxs)(l.ck,{ref:r,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,n.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(l.wU,{children:(0,n.jsx)(a.nQG,{className:"size-4"})})}),(0,n.jsx)(l.eT,{children:s})]})});f.displayName=l.ck.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(l.Z0,{ref:r,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=l.Z0.displayName},52467:function(e,r,t){"use strict";t.d(r,{FF:function(){return j},Tu:function(){return f},aM:function(){return d},bC:function(){return p},ue:function(){return m},yo:function(){return c}});var n=t(52948),s=t(30786),a=t(97647),l=t(28523),i=t(14709),o=t(33412);let c=a.fC,d=a.xz;a.x8;let u=a.h_,x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r})});x.displayName=a.aV.displayName;let h=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=s.forwardRef((e,r)=>{let{side:t="right",className:s,children:i,...c}=e;return(0,n.jsxs)(u,{children:[(0,n.jsx)(x,{}),(0,n.jsxs)(a.VY,{ref:r,className:(0,o.cn)(h({side:t}),s),...c,children:[i,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(l.Pxu,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=a.VY.displayName;let f=e=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};f.displayName="SheetHeader";let j=e=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};j.displayName="SheetFooter";let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.Dx,{ref:r,className:(0,o.cn)("text-lg font-semibold text-foreground",t),...s})});p.displayName=a.Dx.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.dk,{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})}).displayName=a.dk.displayName},56815:function(e,r,t){"use strict";t.d(r,{r:function(){return i}});var n=t(52948),s=t(30786),a=t(84051),l=t(33412);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.fC,{className:(0,l.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:(0,n.jsx)(a.bU,{className:(0,l.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});i.displayName=a.fC.displayName},60753:function(e,r,t){"use strict";t.d(r,{Tabs:function(){return i},TabsContent:function(){return d},TabsList:function(){return o},TabsTrigger:function(){return c}});var n=t(52948),s=t(30786),a=t(3536),l=t(33412);let i=a.fC,o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.aV,{ref:r,className:(0,l.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s})});o.displayName=a.aV.displayName;let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.xz,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s})});c.displayName=a.xz.displayName;let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(a.VY,{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});d.displayName=a.VY.displayName},84051:function(e,r,t){"use strict";t.d(r,{bU:function(){return N},fC:function(){return y}});var n=t(98323),s=t(30786),a=t(88532),l=t(45477),i=t(69726),o=t(29367),c=t(20386),d=t(73123),u=t(99034);let x="Switch",[h,m]=(0,i.b)(x),[f,j]=h(x),p=(0,s.forwardRef)((e,r)=>{let{__scopeSwitch:t,name:i,checked:c,defaultChecked:d,required:x,disabled:h,value:m="on",onCheckedChange:j,...p}=e,[g,y]=(0,s.useState)(null),N=(0,l.e)(r,e=>y(e)),w=(0,s.useRef)(!1),z=!g||!!g.closest("form"),[k=!1,C]=(0,o.T)({prop:c,defaultProp:d,onChange:j});return(0,s.createElement)(f,{scope:t,checked:k,disabled:h},(0,s.createElement)(u.WV.button,(0,n.Z)({type:"button",role:"switch","aria-checked":k,"aria-required":x,"data-state":b(k),"data-disabled":h?"":void 0,disabled:h,value:m},p,{ref:N,onClick:(0,a.M)(e.onClick,e=>{C(e=>!e),z&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})),z&&(0,s.createElement)(v,{control:g,bubbles:!w.current,name:i,value:m,checked:k,required:x,disabled:h,style:{transform:"translateX(-100%)"}}))}),g=(0,s.forwardRef)((e,r)=>{let{__scopeSwitch:t,...a}=e,l=j("SwitchThumb",t);return(0,s.createElement)(u.WV.span,(0,n.Z)({"data-state":b(l.checked),"data-disabled":l.disabled?"":void 0},a,{ref:r}))}),v=e=>{let{control:r,checked:t,bubbles:a=!0,...l}=e,i=(0,s.useRef)(null),o=(0,c.D)(t),u=(0,d.t)(r);return(0,s.useEffect)(()=>{let e=i.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==t&&r){let n=new Event("click",{bubbles:a});r.call(e,t),e.dispatchEvent(n)}},[o,t,a]),(0,s.createElement)("input",(0,n.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:t},l,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function b(e){return e?"checked":"unchecked"}let y=p,N=g}},function(e){e.O(0,[792,1896,736,9986,4699,1960,6035,2494,7647,5362,6856,4645,1418,3536,1826,786,4517,2100,1162,1744],function(){return e(e.s=83492)}),_N_E=e.O()}]);
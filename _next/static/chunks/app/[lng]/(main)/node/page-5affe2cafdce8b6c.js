(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3146],{3492:function(e,n,r){Promise.resolve().then(r.bind(r,7381)),Promise.resolve().then(r.bind(r,2642)),Promise.resolve().then(r.bind(r,9441))},7381:function(e,n,r){"use strict";r.d(n,{default:function(){return b}});var s=r(2948),t=r(786),a=r(4293),l=r(2216),i=r(9986),o=r(4645),c=r(2098),d=r(3124),u=r(2887),x=r(3989),h=r(9921),j=r(2720),m=r(4783),f=r(2467),p=r(3328),g=r(8324);let v=x.z.object({name:x.z.string().min(2,{message:"name must be at least 2 characters."}),remarks:x.z.string()});function b(){let{data:e,refetch:n}=(0,o.a)({queryKey:["postAdminNodeGroupList"],queryFn:async()=>{let{data:e}=await (0,a.uR)({size:0});return e.data}}),[r,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[N,w]=(0,t.useState)(),z=(0,d.cI)({resolver:(0,l.F)(v)});async function k(e){x(!0);let r=(null==N?void 0:N.id)?a.Dl:a.cx,s=(null==N?void 0:N.id)?{...N,id:N.id,...e}:e,{data:t}=await r(s);0===t.code&&(n(),u.A.success((null==N?void 0:N.id)?"更新成功":"创建成功"),y(!1),w(void 0),z.reset()),x(!1)}return(0,s.jsx)(p.w,{header:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(f.yo,{open:b,onOpenChange:y,children:[(0,s.jsx)(f.aM,{asChild:!0,children:(0,s.jsx)(h.z,{size:"sm",onClick:()=>{w(void 0),z.reset()},children:"新建"})}),(0,s.jsx)(f.ue,{children:(0,s.jsxs)(f.Tu,{children:[(0,s.jsxs)(f.bC,{children:[(null==N?void 0:N.id)?"编辑":"创建","节点组"]}),(0,s.jsx)(f.Ei,{children:(0,s.jsx)(j.l0,{...z,children:(0,s.jsxs)("form",{onSubmit:z.handleSubmit(k),className:"space-y-8",children:[(0,s.jsx)(j.Wi,{control:z.control,name:"name",render:e=>{let{field:n}=e;return(0,s.jsxs)(j.xJ,{children:[(0,s.jsx)(j.lX,{children:"名称"}),(0,s.jsx)(j.NI,{children:(0,s.jsx)(m.I,{...n})}),(0,s.jsx)(j.zG,{})]})}}),(0,s.jsx)(j.Wi,{control:z.control,name:"remarks",render:e=>{let{field:n}=e;return(0,s.jsxs)(j.xJ,{children:[(0,s.jsx)(j.lX,{children:"描述"}),(0,s.jsx)(j.NI,{children:(0,s.jsx)(m.I,{...n})}),(0,s.jsx)(j.zG,{})]})}}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(h.z,{type:"submit",disabled:r,children:[r&&(0,s.jsx)(i.JO,{icon:"mdi:loading",className:"animate-spi mr-2"})," 确定"]})})]})})})]})})]})}),columns:[{accessorKey:"name",header:"名称"},{accessorKey:"remarks",header:"描述"},{accessorKey:"updated_at",header:"更新时间",cell:e=>{let{row:n}=e;return(0,c.p6)(n.getValue("updated_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,s.jsx)("div",{className:"text-right",children:"操作"}),cell:e=>{let{row:r}=e;return(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(h.z,{size:"sm",onClick:()=>{w(r.original),Object.keys(r.original).forEach(e=>{z.setValue(e,r.original[e])}),y(!0)},children:"编辑"}),(0,s.jsx)(g.Z,{trigger:"删除",title:"你确定要删除吗?",description:"删除后数据将无法恢复，请谨慎操作",onConfirm:async()=>{await (0,a.OF)({id:r.original.id}),u.A.success("删除成功"),n()},onCancelText:"取消",onConfirmText:"确认"})]})}}],data:(null==e?void 0:e.list)||[],pagination:{page:1,size:null==e?void 0:e.total,total:null==e?void 0:e.total},operations:{remove:async e=>{e.forEach(async e=>{await (0,a.OF)({id:e.id})}),u.A.success("删除成功"),n()}}})}},2642:function(e,n,r){"use strict";r.d(n,{default:function(){return L}});var s=r(2948),t=r(786),a=r(4293),l=r(4645),i=r(2098),o=r(2887),c=r(9921),d=r(8849),u=r(1050),x=r(2467),h=r(8323),j=r(8532),m=r(5477),f=r(9726),p=r(9367),g=r(386),v=r(3123),b=r(9034);let y="Switch",[N,w]=(0,f.b)(y),[z,k]=N(y),_=(0,t.forwardRef)((e,n)=>{let{__scopeSwitch:r,name:s,checked:a,defaultChecked:l,required:i,disabled:o,value:c="on",onCheckedChange:d,...u}=e,[x,f]=(0,t.useState)(null),g=(0,m.e)(n,e=>f(e)),v=(0,t.useRef)(!1),y=!x||!!x.closest("form"),[N=!1,w]=(0,p.T)({prop:a,defaultProp:l,onChange:d});return(0,t.createElement)(z,{scope:r,checked:N,disabled:o},(0,t.createElement)(b.WV.button,(0,h.Z)({type:"button",role:"switch","aria-checked":N,"aria-required":i,"data-state":V(N),"data-disabled":o?"":void 0,disabled:o,value:c},u,{ref:g,onClick:(0,j.M)(e.onClick,e=>{w(e=>!e),y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})),y&&(0,t.createElement)(I,{control:x,bubbles:!v.current,name:s,value:c,checked:N,required:i,disabled:o,style:{transform:"translateX(-100%)"}}))}),C=(0,t.forwardRef)((e,n)=>{let{__scopeSwitch:r,...s}=e,a=k("SwitchThumb",r);return(0,t.createElement)(b.WV.span,(0,h.Z)({"data-state":V(a.checked),"data-disabled":a.disabled?"":void 0},s,{ref:n}))}),I=e=>{let{control:n,checked:r,bubbles:s=!0,...a}=e,l=(0,t.useRef)(null),i=(0,g.D)(r),o=(0,v.t)(n);return(0,t.useEffect)(()=>{let e=l.current,n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==r&&n){let t=new Event("click",{bubbles:s});n.call(e,r),e.dispatchEvent(t)}},[i,r,s]),(0,t.createElement)("input",(0,h.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:r},a,{tabIndex:-1,ref:l,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function V(e){return e?"checked":"unchecked"}var W=r(3412);let T=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(_,{className:(0,W.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...t,ref:n,children:(0,s.jsx)(C,{className:(0,W.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});T.displayName=_.displayName;var E=r(3328),G=r(8324),J=r(2216),Q=r(9986),R=r(3124),S=r(3989),X=r(3854),P=r(2720),K=r(4783);let F=S.z.object({transfer_address:S.z.string().optional(),transfer_port:S.z.number().optional()}),M=S.z.object({method:S.z.string(),server_key:S.z.string()}),Z=S.z.object({network:S.z.string(),enable_tls:S.z.boolean(),service_name:S.z.string().optional(),path:S.z.string().optional()}),q=S.z.object({network:S.z.string(),enable_tls:S.z.boolean(),service_name:S.z.string().optional(),path:S.z.string().optional()}),A=S.z.object({network:S.z.string(),service_name:S.z.string().optional(),path:S.z.string().optional()}),D=S.z.union([M,Z,q,A]),O=S.z.object({name:S.z.string().min(2,{message:"name must be at least 2 characters."}),remarks:S.z.string().optional(),address:S.z.string(),port:S.z.number(),node_speed_limit:S.z.number().optional(),traffic_rate:S.z.number().optional(),protocol:S.z.enum(["shadowsocks","vmess","vless","trojan","transfer"]),node_group_id:S.z.number().optional().nullish(),extra_config:D.optional().and(F)});function B(e){let{onSubmit:n,initialValues:r,loading:i}=e,{data:o}=(0,l.a)({queryKey:["postAdminNodeGroupList","all"],queryFn:async()=>{let{data:e}=await (0,a.uR)({size:0});return e.data.list}}),d=(0,R.cI)({resolver:(0,J.F)(O),defaultValues:r}),x=d.watch("protocol");return(0,t.useEffect)(()=>{(null==r?void 0:r.protocol)!==x&&(null==d||d.setValue("extra_config",{}))},[d,x,null==r?void 0:r.protocol]),(0,s.jsxs)(P.l0,{...d,children:[(0,s.jsxs)("form",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsx)(P.Wi,{control:d.control,name:"name",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"名称"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"remarks",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"备注"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"node_speed_limit",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"节点限速"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"traffic_rate",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"流量比例"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"address",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"服务器地址"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"port",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"服务器端口"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"protocol",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"协议"}),(0,s.jsx)(P.NI,{children:(0,s.jsxs)(u.Ph,{onValueChange:n.onChange,defaultValue:n.value,children:[(0,s.jsx)(P.NI,{children:(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{placeholder:"请选择协议"})})}),(0,s.jsxs)(u.Bw,{children:[(0,s.jsx)(u.Ql,{value:"shadowsocks",children:"Shadowsocks"}),(0,s.jsx)(u.Ql,{value:"vmess",children:"Vmess"}),(0,s.jsx)(u.Ql,{value:"vless",children:"Vless"}),(0,s.jsx)(u.Ql,{value:"trojan",children:"Trojan"})]})]})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"node_group_id",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"节点组ID"}),(0,s.jsx)(P.NI,{children:(0,s.jsxs)(u.Ph,{onValueChange:e=>{"empty"===e?n.onChange(void 0):n.onChange(Number(e))},defaultValue:String(n.value),children:[(0,s.jsx)(P.NI,{children:(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{placeholder:"请选择协议"})})}),(0,s.jsxs)(u.Bw,{children:[(0,s.jsx)(u.Ql,{value:"empty",children:"不分组"}),null==o?void 0:o.map(e=>(0,s.jsx)(u.Ql,{value:String(e.id),children:e.name},e.id))]})]})}),(0,s.jsx)(P.zG,{})]})}}),x&&(0,s.jsxs)(X.UQ,{type:"multiple",defaultValue:["protocol"],className:"col-span-2 w-full",children:[(0,s.jsxs)(X.Qd,{value:"protocol",children:[(0,s.jsx)(X.o4,{className:"uppercase",children:x}),(0,s.jsxs)(X.vF,{className:"grid grid-cols-2 gap-2",children:["shadowsocks"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.method",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"加密方式"}),(0,s.jsx)(P.NI,{children:(0,s.jsxs)(u.Ph,{onValueChange:n.onChange,defaultValue:n.value,children:[(0,s.jsx)(P.NI,{children:(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{placeholder:"请选择加密方式"})})}),(0,s.jsxs)(u.Bw,{children:[(0,s.jsx)(u.Ql,{value:"2022-blake3-aes-256-gcm",children:"2022-blake3-aes-256-gcm"}),(0,s.jsx)(u.Ql,{value:"2022-blake3-chacha20-poly1305",children:"2022-blake3-chacha20-poly1305"}),(0,s.jsx)(u.Ql,{value:"aes-256-gcm",children:"aes-256-gcm"}),(0,s.jsx)(u.Ql,{value:"aes-128-gcm",children:"aes-128-gcm"}),(0,s.jsx)(u.Ql,{value:"chacha20-ietf-poly1305",children:"chacha20-ietf-poly1305"})]})]})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.server_key",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"密码"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}})]}),"vmess"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.network",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"网络类型"}),(0,s.jsx)(P.NI,{children:(0,s.jsxs)(u.Ph,{onValueChange:n.onChange,defaultValue:n.value||"tcp",children:[(0,s.jsx)(P.NI,{children:(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{placeholder:"网络类型"})})}),(0,s.jsxs)(u.Bw,{children:[(0,s.jsx)(u.Ql,{value:"tcp",children:"TCP"}),(0,s.jsx)(u.Ql,{value:"websocket",children:"WebSocket"}),(0,s.jsx)(u.Ql,{value:"grpc",children:"gRPC"})]})]})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.enable_tls",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"是否启用 TLS"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(T,{checked:!!n.value,onCheckedChange:n.onChange})})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.service_name",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"服务名"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.path",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"路径"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}})]}),"vless"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.network",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"网络类型"}),(0,s.jsx)(P.NI,{children:(0,s.jsxs)(u.Ph,{onValueChange:n.onChange,defaultValue:n.value||"tcp",children:[(0,s.jsx)(P.NI,{children:(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{placeholder:"网络类型"})})}),(0,s.jsxs)(u.Bw,{children:[(0,s.jsx)(u.Ql,{value:"tcp",children:"TCP"}),(0,s.jsx)(u.Ql,{value:"websocket",children:"WebSocket"}),(0,s.jsx)(u.Ql,{value:"grpc",children:"gRPC"}),(0,s.jsx)(u.Ql,{value:"http2",children:"HTTP/2"})]})]})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.enable_tls",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"是否启用 TLS"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(T,{checked:!!n.value,onCheckedChange:n.onChange})})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.service_name",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"服务名"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.path",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"路径"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}})]}),"trojan"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.network",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"网络类型"}),(0,s.jsx)(P.NI,{children:(0,s.jsxs)(u.Ph,{onValueChange:n.onChange,defaultValue:n.value||"tcp",children:[(0,s.jsx)(P.NI,{children:(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{placeholder:"网络类型"})})}),(0,s.jsxs)(u.Bw,{children:[(0,s.jsx)(u.Ql,{value:"tcp",children:"TCP"}),(0,s.jsx)(u.Ql,{value:"websocket",children:"WebSocket"}),(0,s.jsx)(u.Ql,{value:"grpc",children:"gRPC"})]})]})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.service_name",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"服务名"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.path",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"路径"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}})]})]})]}),(0,s.jsxs)(X.Qd,{value:"transfer",children:[(0,s.jsx)(X.o4,{children:"中转配置"}),(0,s.jsxs)(X.vF,{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.transfer_address",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"中转地址"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n})}),(0,s.jsx)(P.zG,{})]})}}),(0,s.jsx)(P.Wi,{control:d.control,name:"extra_config.transfer_port",render:e=>{let{field:n}=e;return(0,s.jsxs)(P.xJ,{children:[(0,s.jsx)(P.lX,{children:"中转端口"}),(0,s.jsx)(P.NI,{children:(0,s.jsx)(K.I,{...n,type:"number",value:n.value?Number(n.value):void 0,onChange:e=>{n.onChange(e.target.value?Number(e.target.value):void 0)}})}),(0,s.jsx)(P.zG,{})]})}})]})]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsxs)(c.z,{type:"submit",onClick:d.handleSubmit(e=>n(e,d)),children:[i&&(0,s.jsx)(Q.JO,{icon:"mdi:loading",className:"animate-spi mr-2"})," 确定"]})})]})}function L(){let[e,n]=(0,t.useState)({page:1,size:50}),{data:r,refetch:h}=(0,l.a)({queryKey:["postAdminNodeList",e],queryFn:async()=>{let{data:n}=await (0,a.HZ)(e);return n.data}}),{data:j}=(0,l.a)({queryKey:["postAdminNodeGroupList","all"],queryFn:async()=>{let{data:e}=await (0,a.uR)({size:0});return e.data.list}}),m=[{accessorKey:"name",header:"名称"},{accessorKey:"protocol",header:"类型"},{accessorKey:"address",header:"地址",cell:e=>{let{row:n}=e;return"".concat(n.original.address,":").concat(n.original.port)}},{accessorKey:"node_speed_limit",header:"限速"},{accessorKey:"traffic_rate",header:"倍率"},{accessorKey:"enabled",header:"状态",cell:e=>{let{row:n}=e;return(0,s.jsx)(T,{checked:n.getValue("enabled"),onCheckedChange:async e=>{await (0,a.Eo)({...n.original,id:n.original.id,enabled:e}),h()}})}},{accessorKey:"node_group_id",header:"节点组",cell:e=>{var n;let{row:r}=e;return null==j?void 0:null===(n=j.find(e=>e.id===r.getValue("node_group_id")))||void 0===n?void 0:n.name}},{accessorKey:"updated_at",header:"更新时间",cell:e=>{let{row:n}=e;return(0,i.p6)(n.getValue("updated_at"),"yyyy-MM-dd HH:mm:ss")}},{id:"actions",accessorKey:"id",header:()=>(0,s.jsx)("div",{className:"text-right",children:"操作"}),cell:e=>{let{row:n}=e;return(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(c.z,{size:"sm",onClick:()=>{y(n.original),v(!0)},children:"编辑"}),(0,s.jsx)(G.Z,{trigger:"删除",title:"你确定要删除吗?",description:"删除后数据将无法恢复，请谨慎操作",onConfirm:async()=>{await (0,a.dm)({id:n.original.id}),o.A.success("删除成功"),h()},onCancelText:"取消",onConfirmText:"确认"})]})}}],[f,p]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)();async function N(e,n){p(!0);try{let r=(null==b?void 0:b.id)?a.Eo:a.d_,s=(null==b?void 0:b.id)?{...b,id:b.id,...e}:{...e,enabled:!0};await r(s),h(),o.A.success((null==b?void 0:b.id)?"更新成功":"创建成功"),v(!1),y(void 0),n.reset()}catch(e){}p(!1)}return(0,s.jsx)(E.w,{header:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)(u.Ph,{onValueChange:r=>{n({...e,node_group_id:"all"===r?void 0:Number(r)})},children:[(0,s.jsx)(u.i4,{className:"w-[180px]",children:(0,s.jsx)(u.ki,{placeholder:"节点组"})}),(0,s.jsx)(u.Bw,{children:(0,s.jsxs)(u.DI,{children:[(0,s.jsx)(u.Ql,{value:"all",children:"全部"}),null==j?void 0:j.map(e=>(0,s.jsx)(u.Ql,{value:String(e.id),children:e.name},e.id))]})})]}),(0,s.jsxs)(x.yo,{open:g,onOpenChange:v,children:[(0,s.jsx)(x.aM,{asChild:!0,children:(0,s.jsx)(c.z,{size:"sm",onClick:()=>{y(void 0)},children:"新建"})}),(0,s.jsxs)(x.ue,{children:[(0,s.jsxs)(x.Tu,{children:[(0,s.jsxs)(x.bC,{children:[(null==b?void 0:b.id)?"编辑":"创建","节点"]}),(0,s.jsx)(x.Ei,{children:"需要帮助请查看官方配置文档哦"})]}),(0,s.jsx)(d.x,{children:(0,s.jsx)(B,{onSubmit:N,initialValues:b,loading:f})})]})]})]}),columns:m,data:(null==r?void 0:r.list)||[],pagination:{page:e.page,size:e.size,total:null==r?void 0:r.total,onChange:(r,s)=>{n({...e,page:r,size:s})}},operations:{remove:async e=>{e.forEach(async e=>{await (0,a.dm)({id:e.id})}),o.A.success("删除成功"),h()}}})}},1050:function(e,n,r){"use strict";r.d(n,{Bw:function(){return j},DI:function(){return c},Ph:function(){return o},Ql:function(){return m},i4:function(){return u},ki:function(){return d}});var s=r(2948),t=r(786),a=r(8523),l=r(7950),i=r(3412);let o=l.fC,c=l.ZA,d=l.B4,u=t.forwardRef((e,n)=>{let{className:r,children:t,...o}=e;return(0,s.jsxs)(l.xz,{ref:n,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[t,(0,s.jsx)(l.JO,{asChild:!0,children:(0,s.jsx)(a.jnn,{className:"size-4 opacity-50"})})]})});u.displayName=l.xz.displayName;let x=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.u_,{ref:n,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,s.jsx)(a.g8U,{})})});x.displayName=l.u_.displayName;let h=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.$G,{ref:n,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...t,children:(0,s.jsx)(a.v4q,{})})});h.displayName=l.$G.displayName;let j=t.forwardRef((e,n)=>{let{className:r,children:t,position:a="popper",...o}=e;return(0,s.jsx)(l.h_,{children:(0,s.jsxs)(l.VY,{ref:n,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a,...o,children:[(0,s.jsx)(x,{}),(0,s.jsx)(l.l_,{className:(0,i.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(h,{})]})})});j.displayName=l.VY.displayName,t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.__,{ref:n,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r),...t})}).displayName=l.__.displayName;let m=t.forwardRef((e,n)=>{let{className:r,children:t,...o}=e;return(0,s.jsxs)(l.ck,{ref:n,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...o,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(a.nQG,{className:"size-4"})})}),(0,s.jsx)(l.eT,{children:t})]})});m.displayName=l.ck.displayName,t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(l.Z0,{ref:n,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",r),...t})}).displayName=l.Z0.displayName},9441:function(e,n,r){"use strict";r.d(n,{Tabs:function(){return C},TabsContent:function(){return W},TabsList:function(){return I},TabsTrigger:function(){return V}});var s=r(2948),t=r(786),a=r(8323),l=r(8532),i=r(9726),o=r(1540),c=r(7860),d=r(9034),u=r(9848),x=r(9367),h=r(3454);let j="Tabs",[m,f]=(0,i.b)(j,[o.Pc]),p=(0,o.Pc)(),[g,v]=m(j),b=(0,t.forwardRef)((e,n)=>{let{__scopeTabs:r,value:s,onValueChange:l,defaultValue:i,orientation:o="horizontal",dir:c,activationMode:j="automatic",...m}=e,f=(0,u.gm)(c),[p,v]=(0,x.T)({prop:s,onChange:l,defaultProp:i});return(0,t.createElement)(g,{scope:r,baseId:(0,h.M)(),value:p,onValueChange:v,orientation:o,dir:f,activationMode:j},(0,t.createElement)(d.WV.div,(0,a.Z)({dir:f,"data-orientation":o},m,{ref:n})))}),y=(0,t.forwardRef)((e,n)=>{let{__scopeTabs:r,loop:s=!0,...l}=e,i=v("TabsList",r),c=p(r);return(0,t.createElement)(o.fC,(0,a.Z)({asChild:!0},c,{orientation:i.orientation,dir:i.dir,loop:s}),(0,t.createElement)(d.WV.div,(0,a.Z)({role:"tablist","aria-orientation":i.orientation},l,{ref:n})))}),N=(0,t.forwardRef)((e,n)=>{let{__scopeTabs:r,value:s,disabled:i=!1,...c}=e,u=v("TabsTrigger",r),x=p(r),h=z(u.baseId,s),j=k(u.baseId,s),m=s===u.value;return(0,t.createElement)(o.ck,(0,a.Z)({asChild:!0},x,{focusable:!i,active:m}),(0,t.createElement)(d.WV.button,(0,a.Z)({type:"button",role:"tab","aria-selected":m,"aria-controls":j,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h},c,{ref:n,onMouseDown:(0,l.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(s)}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(s)}),onFocus:(0,l.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;m||i||!e||u.onValueChange(s)})})))}),w=(0,t.forwardRef)((e,n)=>{let{__scopeTabs:r,value:s,forceMount:l,children:i,...o}=e,u=v("TabsContent",r),x=z(u.baseId,s),h=k(u.baseId,s),j=s===u.value,m=(0,t.useRef)(j);return(0,t.useEffect)(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.createElement)(c.z,{present:l||j},({present:r})=>(0,t.createElement)(d.WV.div,(0,a.Z)({"data-state":j?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":x,hidden:!r,id:h,tabIndex:0},o,{ref:n,style:{...e.style,animationDuration:m.current?"0s":void 0}}),r&&i))});function z(e,n){return`${e}-trigger-${n}`}function k(e,n){return`${e}-content-${n}`}var _=r(3412);let C=b,I=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(y,{ref:n,className:(0,_.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...t})});I.displayName=y.displayName;let V=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(N,{ref:n,className:(0,_.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...t})});V.displayName=N.displayName;let W=t.forwardRef((e,n)=>{let{className:r,...t}=e;return(0,s.jsx)(w,{ref:n,className:(0,_.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});W.displayName=w.displayName}},function(e){e.O(0,[792,1896,9185,2887,778,3624,8450,4129,4075,2494,8422,1326,6661,2100,1162,1744],function(){return e(e.s=3492)}),_N_E=e.O()}]);